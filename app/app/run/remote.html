<div class="row">
  <div class="col-sm-12">
    <uib-accordion>
      <uib-accordion-group is-open="remoteSettings.open">
        <uib-accordion-heading>
          <i class="pull-left glyphicon pad-right-5 black-button" ng-class="{'glyphicon-chevron-down': remoteSettings.open, 'glyphicon-chevron-right': !remoteSettings.open}"></i>
          <translate>run.remote.serverSettings</translate>
        </uib-accordion-heading>
        <div class="row pad-bot-20">
          <label for="remoteType" class="col-sm-3 run-label" translate>run.remote.serverType</label>
          <div class="col-sm-6">
            <select id="remoteType" class="form-control" ng-options="remoteType for remoteType in remoteTypes" ng-model="remoteSettings.remoteType" ng-change="run.OsServer.resetSelectedServerURL()"></select>
          </div>
        </div>
        <div class="row" ng-if="remoteSettings.remoteType == 'Existing Remote Server'">
          <label for="externalURL" class="col-sm-3 run-label" translate>run.remote.serverURL</label>
          <div class="col-sm-7">
            <input class="form-control" id="externalURL" type="text" ng-model="remoteSettings.remoteServerURL" ng-change="run.resetRemoteServerURL()">
          </div>
          <div class="col-sm-1">
            <button type="button" class="btn btn-primary" ng-show="serverStatuses[selectedRunType.name] != 'started'" ng-click="run.startServer()" translate>run.remote.connect</button>
            <button type="button" class="btn btn-danger" ng-show="serverStatuses[selectedRunType.name] == 'started'" ng-click="run.stopServer()" translate>run.remote.disconnect</button>
          </div>
        </div>
        <div ng-if="remoteSettings.remoteType == 'Amazon Cloud'">
          <div class="row pad-bot-10 normal-text">
            <div class="col-sm-4">
              <label for="cluster" class="run-label" translate>run.remote.selectCluster</label>
              <select id="cluster" class="form-control" ng-options="option for option in clusters" ng-model="remoteSettings.aws.cluster_name" ng-change="run.resetClusterSettings()"></select>
            </div>
            <div class="col-sm-1 pad-top-25">or</div>
            <div class="col-sm-3 pad-top-25">
              <button type="button" class="btn btn-primary" ng-click="run.newClusterModal()" translate>run.remote.newCluster</button>
            </div>
            <div class="col-sm-2 col-sm-offset-2 pad-top-25"><translate>run.remote.status</translate>
              <span ng-show="remoteSettings.aws.connected" class="glyphicon glyphicon-ok green-button" aria-label="connected"></span>
              <span ng-show="!remoteSettings.aws.connected" class="glyphicon glyphicon-remove red-button" aria-label="terminated"></span>
            </div>
          </div>
          <div ng-if="remoteSettings.aws.cluster_name">
            <div class="row pad-bot-10">
              <div class="col-sm-4">
                <label for="serverVersion" class="run-label" translate>run.remote.osServerVersion</label>
                <select id="serverVersion" class="form-control" ng-options="option for option in osServerVersions" ng-model="remoteSettings.aws.openstudio_server_version"></select>
              </div>
              <div class="col-sm-3">
                <label for="awsUserID" class="run-label" translate>run.remote.awsUserID</label>
                <input class="form-control" id="awsUserID" type="text" ng-model="remoteSettings.aws.user_id" />
              </div>
            </div>
            <div class="row pad-bot-10">
              <div class="col-sm-4">
                <label for="serverInstanceType" class="run-label" translate>run.remote.serverInstanceType</label>
                <select id="serverInstanceType" class="form-control" ng-options="option.name for option in serverInstanceTypes" ng-model="remoteSettings.aws.server_instance_type"></select>
              </div>
              <div class="col-sm-2">
                <label for="cpus" class="run-label" translate>run.remote.cpus</label>
                <div id="cpus" class="normal-text">{{remoteSettings.aws.server_instance_type.cpus}}</div>
              </div>
              <div class="col-sm-2">
                <label for="mem" class="run-label" translate>run.remote.memory</label>
                <div id="mem" class="normal-text">{{remoteSettings.aws.server_instance_type.memory}}</div>
              </div>
              <label for="storage" class="run-label" translate>run.remote.storage</label>
              <div id="storage" class="normal-text">{{remoteSettings.aws.server_instance_type.storage}}</div>
            </div>
            <div class="row pad-bot-10">
              <div class="col-sm-4">
                <label for="workerInstanceType" class="run-label" translate>run.remote.serverInstanceType</label>
                <select id="workerInstanceType" class="form-control" ng-options="option.name for option in serverInstanceTypes" ng-model="remoteSettings.aws.worker_instance_type"></select>
              </div>
              <div class="col-sm-3">
                <label for="numWorkers" class="run-label" translate>run.remote.numberOfWorkers</label>
                <input class="form-control" id="numWorkers" type="text" ng-model="remoteSettings.aws.worker_node_number" />
              </div>
            </div>
            <div class="row pad-bot-10">
              <div class="col-sm-3 col-sm-offset-3">
                <button type="button" class="btn btn-success" ng-click="run.saveClusterToFile()" translate>run.remote.saveCluster</button>
              </div>
            </div>
          </div>
        </div>
      </uib-accordion-group>
    </uib-accordion>
  </div>
</div>

<div class="row pad-bot-20">
  <div class="col-sm-8">
    <button type="button" class="btn btn-success" ng-show="!disabledButtons" ng-click="run.warnBeforeDelete('run')" translate>run.runEntireWorkflow</button>
    <button type="button" class="btn btn-danger" ng-show="disabledButtons && serverStatuses[selectedRunType.name] == 'started'" ng-click="run.cancelRun()" translate>run.cancelRun</button>
    <button type="button" class="btn btn-primary" ng-show="serverStatuses[selectedRunType.name] == 'started'" ng-click="run.viewServer()">run.viewServer</button>
  </div>
</div>
